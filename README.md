# 美術史人物相関図作成アプリ

## 概要
このアプリケーションは、美術検定の学習支援を目的とした、美術史上の人物とその関係性を視覚的に整理・表示・管理するためのツールです。人物間の師弟関係、尊敬、対立などの多様な関係性をグラフ形式で直感的に把握できます。

## 機能一覧

### フェーズ1: グラフ表示
- 人物（ノード）と関係（エッジ）をグラフ形式で表示します。
- エッジには関係の方向を示す矢印が表示されます。
- ノードはドラッグで移動可能、グラフはズーム・パン操作が可能です。
- モダンなアート風UIデザインを採用しています。

### フェーズ2: データ登録・管理
- **人物（ノード）の追加:**
  - 人物名、時代、解説、代表作（カンマ区切り）を登録できます。
- **関係（エッジ）の追加:**
  - 既存の人物ノードを選択し、その間の関係性（ラベル）を登録できます。
  - 関係の種類（ライバル、師匠と弟子、継承、パトロンなど）に応じて、エッジの色、太さ、矢印の種類（片矢印/両矢印）が変化します。
  - エッジのラベルは日本語で表示されます。
- **ノード詳細表示:**
  - グラフ上のノードをクリックすると、サイドバーにその人物の詳細情報（解説、代表作など）が表示されます。
  - **編集機能:** 詳細表示パネルからノードの情報を直接編集し、フローチャートに反映できます。
- **データダウンロード:**
  - 現在のグラフの状態（ノードとエッジのデータ）をJSONファイルとしてダウンロードできます。
- **データアップロード:**
  - ダウンロードしたJSONファイルを読み込み、アプリのデータを更新できます。

## 技術スタック

- **フレームワーク:** Next.js (App Router)
- **言語:** TypeScript
- **UIライブラリ:** MUI (Material-UI) - 日本語ロケール設定済み
- **グラフ描画:** React Flow
- **スタイリング:** Emotion (MUIのデフォルトスタイリングエンジン)
- **パッケージマネージャー:** npm

## プロジェクト構造

主要なディレクトリとファイルの構成は以下の通りです。

```
. # プロジェクトのルートディレクトリ
├── app/                  # Next.jsアプリケーションのルート
│   ├── public/           # 静的ファイル (画像など)
│   ├── src/              # アプリケーションのソースコード
│   │   ├── app/          # Next.jsのApp Routerルート (page.tsx, layout.tsxなど)
│   │   ├── components/   # 再利用可能なReactコンポーネント
│   │   │   ├── FlowChart.tsx     # アプリケーションのメインコンポーネント。React Flowを使い、ノードとエッジの描画、状態管理、操作パネルの統合を行います。
│   │   │   ├── NodeDetail.tsx    # 選択されたノードの詳細情報を表示・編集するコンポーネント。
│   │   │   └── (その他コンポーネント) # AddNodeForm.tsx, CustomNode.tsxなど
│   │   ├── data/         # アプリケーションの初期データ (nodes.json, edges.json)
│   │   └── globals.css   # グローバルCSSスタイル
│   ├── .env              # 環境変数 (開発環境用)
│   ├── next.config.mjs   # Next.jsの設定ファイル
│   ├── package.json      # プロジェクトの依存関係とスクリプト
│   └── tsconfig.json     # TypeScriptの設定ファイル
├── design.md             # アプリケーションの初期設計ドキュメント
├── detail_design.md      # アプリケーションの詳細設計ドキュメント
└── README.md             # このファイル
```

## セットアップ方法

1.  **リポジトリのクローン:**
    ```bash
    git clone <あなたのリポジトリURL>
    cd art_personal_relationship
    ```

2.  **プロジェクトディレクトリへの移動:**
    アプリケーションのコードは `app` ディレクトリ内にあります。
    ```bash
    cd app
    ```

3.  **依存関係のインストール:**
    ```bash
    npm install
    ```

4.  **開発サーバーの起動:**
    ```bash
    npm run dev
    ```

5.  **ブラウザでのアクセス:**
    開発サーバーが起動したら、以下のURLにアクセスしてください。
    ```
    http://localhost:3000
    ```

## データ管理

- アプリケーションは `app/src/data/nodes.json` と `app/src/data/edges.json` を初期データとして読み込みます。
- **自動保存 (ローカルストレージ):**
  - ノードやエッジの変更は、ブラウザのローカルストレージに自動的に保存されます。これにより、ページのリロード時にデータが失われるのを防ぎます。
  - ただし、このデータはブラウザ固有のものであり、別のブラウザやデバイスでは引き継がれません。
- **手動でのデータ管理:**
  - データを永続化したり、他の環境と共有したりするには、操作パネルの「データ保存」セクションにある「Nodes JSON」および「Edges JSON」ボタンからJSONファイルをダウンロードしてください。
  - ダウンロードしたJSONファイルは、操作パネルの「データ読み込み」セクションにあるアップロードボタンから読み込むことで、アプリのデータを更新できます。
  - 次回アプリケーションを起動する際に、ダウンロードしたJSONファイルを `app/src/data` ディレクトリ内の既存のファイルに手動で上書きすることで、初期データを更新し、前回の状態を再現できます。

## 今後の展望

- バックエンドAPIとデータベースの導入によるデータ永続化の自動化
- 検索機能の強化
- 時代や関係性によるフィルタリング機能
- グラフの自動レイアウト機能の改善
